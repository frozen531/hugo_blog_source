---
title: "Shell字符串操作"
date: 2023-02-28T22:22:34+08:00
draft: true
tags: ["Shell"]
categories: ["Linux"]
---

## 字符串操作

### 正则表达式

正则表达式 | 通配符
---|---
用来在文件中匹配符合条件的字符串 | 用来匹配符合条件的文件名
包含匹配 | 完全匹配

![shell基础_基础正则表达式](shell基础_基础正则表达式.bmp)

注意与通配符的区别。

### 字符截取命令：cut
使用`grep`提取行，通过cut提取列，两者常结合使用

```bash
#基本用法
cut [选项] 文件名

#举例，以:为分隔符，列出文件中的第一、三列
[root@localhost 03_make_set]# cut -d ":" -f 1,3 /etc/passwd
```
选项 | 说明
---|---
-f value| 提取第几列
-d value| 按照指定分隔符分隔列

只能用于tab或明确的分隔符，如:，对于空格不行

### 字符截取命令：printf
```bash
#基本格式：格式化输出命令
printf '输出类型输出格式' 要做格式化输出的内容

#举例，输出字符串，中间空格隔开，每三个为一行
[root@localhost 03_make_set]# printf '%s %s %s\n' 1 2 3 4 5 
1 2 3
4 5
```

输出类型 | 说明
---|---
%ns| 输出字符串。 n是数字指代输出几个字符
%ni| 输出整数。 n是数字指代输出几个数字
%m.nf|输出浮点数。 m和n是数字， 指代输出的整数位数和小数位数。 如%8.2f代表共输出8位数，其中2位是小数， 6位是整数。

输出格式 | 说明
---|---
\a| 输出警告声音
\b| 输出退格键， 也就是Backspace键
\f| 清除屏幕
\n（常用）| 换行
\r（常用）| 回车， 也就是Enter键
\t（常用）| 水平输出退格键， 也就是Tab键
\v| 垂直输出退格键， 也就是Tab键

### 字符截取命令：awk

awk中不能用cat和echo，只能用printf和print(Linux默认没有)。print相比printf，会自动在行尾添加换行符，而printf需要手动添加。

同cut功能，截取符合条件的列，没有cut的局限性且可以运行命令，比cut强大很多。

```bash
#基本格式，其中条件可以是关系表达式，动作可以是格式化说出、流程控制等语句，默认识别的分隔符还tab和空格
 awk '条件1{动作1} 条件2{动作2}…' 文件名

#举例，svn info信息中截取版本号
svn_version=$(svn info | grep "Last Changed Rev:" | awk -F ': ' '{print $2}')

#输出df中第一列和第5列
[root@localhost 03_make_set]# df -h | awk '{print $1 "\t" $5}'
文件系统        已用%%
/dev/sda5       13%
tmpfs   0%
/dev/sda1       15%
/dev/sda2       2%
```

### 字符截取命令：sed

sed可以将数据进行选取、替换、删除和新增命令。是一种轻量级流编辑器，可接收`|`的输入。

```bash
#基本格式
sed [选项] '[动作]' 文件名

#举例
[root@localhost 03_make_set]# df -h | sed -n '2p'
/dev/sda5              17G  2.0G   14G  13% /
```

选项 | 说明
--- | ---
-n| 一般sed命令会把所有数据都输出到屏幕 ，如果加入此选择，则只会把经过sed命令处理的行输出到屏幕。
-e| 允许对输入数据应用多条sed命令编辑
-i| 用sed的修改结果直接修改读取数据的文件，而不是由屏幕输出

动作 | 说明
---|---
a \ | 追加，在当前行后添加一行或多行。添加多行时，除最后 一行外，每行末尾需要用“\”代表数据未完结。
c \ | 行替换，用c后面的字符串替换原数据行，替换多行时，除最后一行外，每行末尾需用“\”代表数据未完结。
i \ | 插入，在当期行前插入一行或多行。插入多行时，除最后 一行外，每行末尾需要用“\”代表数据未完结。
d| 删除，删除指定的行。
p| 打印，输出指定的行。
s| 字串替换，用一个字符串替换另外一个字符串。格式为“行范围s/旧字串/新字串/g”（和vim中的替换格式类似） 。

### 字符处理命令：sort

```bash
#基本用法
sort [选项] 文件名

#举例
sort /etc/passwd
```

选项 | 说明
--- | ---
-f | 忽略大小写
-n | 以数值型进行排序，默认使用字符串型排序
-r | 反向排序
-t | 指定分隔符，默认是分隔符是制表符
-k n[,m] | 按照指定的字段范围排序。从第n字段开始，m字段结束（默认到行尾）

### 字符处理命令：wc

```bash
#基本用法
wc [选项] 文件名

#举例，默认直接列出所有统计信息：29行、52个单词、1412个字符
[root@localhost 03_make_set]# wc /etc/passwd
  29   52 1412 /etc/passwd
```

选项 | 说明
---|---
-l | 只统计行数
-w | 只统计单词数
-m | 只统计字符数

## 学习链接
1. [史上最牛的Linux视频教程—兄弟连](https://www.bilibili.com/video/BV1mW411i7Qf?p=63&vd_source=b6daecdfe358d06b1107a6d13e19fe3f)
