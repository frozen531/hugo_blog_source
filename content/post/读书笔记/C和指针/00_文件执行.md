---
title: "00_文件执行"
date: 2023-03-05T21:22:01+08:00
draft: true
tags: ["C和指针"]
categories: ["读书笔记"]
---

# 文件起始

## 1. 文件执行过程

- 源文件
- 预处理器
> - ```#include<stdio.h>```的文件，使用对应的头文件内容逐字复制到源文件
> - ```#define MAX 20```，将文件中的对应符号全部替换为相应值
- 编译
- 链接

## 2. 链接

- C将源文件分开编译，然后将有符号引用的文件进行链接。
- 链接包括：
> 1. 对自己编写的文件链接
> 2. 对库文件的链接
- 链接分为：
> 1. 静态链接：将文件中所需要的引用符号（例如函数）直接拷贝作为可执行文件的物理组成部分。（现在基本不用）
> - 缺点：
> - 1. 对于多个程序共享，会有多份函数库拷贝映射到内存中
> - 2. 各静态链接库的顺序等都会影响链接结果。因为需要先让文件中包含未解析的引用，才能从函数库中提取所需的符号

> 2. 动态链接：在可执行文件中只包含文件名，在运行时按特定路径寻找程序所需的函数库，
> - 优点：
> - 1. 所链接的函数库可以被多个程序共享，在内存中只有一份函数库的拷贝
> - 2. 将程序与它们所使用的特定函数库版本分离开，使软件可以不必因为新版本函数库或操作系统的发布而重新链接
> - 缺点：路径名被指定后，函数库的位置不能够随意移动


























