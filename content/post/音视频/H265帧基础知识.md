---
title: "H265帧基础知识"
date: 2023-04-02T16:15:13+08:00
draft: true
---

支持更多的帧内预测技术和帧间预测技术、SAO是H265新增的一项编码方式

## 编码单元

- H264核心编码单元是宏块
- H265为解决高分辨率的业务需求，采用了编码树单元(coding tree unit:CTU)和编码树块(coding tree block:CTB)

## NALU header

```
+---------------+---------------+
|0|1|2|3|4|5|6|7|0|1|2|3|4|5|6|7|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|F|    TYPE   |  LayerId  | TID |
+---------------+---------------+
```

bit位 | 位数 | 描述
---|---|---
F | 1bit | 禁止位，0表示正常，1表示错误，一般为0
TYPE:nalu_unit_type | 6bits | NALU类型，包含VCL NAL携带编码数据的数据流和non-VCL NAL控制数据流
LayerId | 6bits | 默认为0，为后续扩展使用
TID | 3bits | NALU 的标识符，类似于H264的NRI

nalu_unit_type | NAL类型 
---|---
HEVC_NAL_VPS | 32
HEVC_NAL_SPS | 33
HEVC_NAL_PPS | 34
HEVC_NAL_SEI_PREFIX | 39
HEVC_NAL_IDR_W_RADL | 19
HEVC_NAL_TRAIL_R | 1

```c
// 类型
int type = (code & 0x7E)>>1;
```

NALU header 
---|---
00 00 00 01 40 01 | VPS
00 00 00 01 42 01 | SPS
00 00 00 01 44 01 | PPS
00 00 00 01 4E 01 | SEI
00 00 00 01 26 01 | IDR
00 00 00 01 02 01 | P

## 参考

1. [Hi3516a——h265 Nalu类型详细解析](https://blog.csdn.net/u014470361/article/details/89541544)